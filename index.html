<!doctype html>
<html lang="no">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Pro Carwash Halden — Bilpleie i Halden</title>
<meta name="description" content="Pro Carwash Halden. Profesjonell bilvask og detailing i Halden.">
<style>
  :root{
    --bg:#0b1936; --ink:#e8f1ff; --muted:#a9bed8;
    --soft-blue:#bfe6ff; --accent:#69b9ff; --wrap:1120px;
  }
  *{box-sizing:border-box} html{scroll-behavior:smooth}
  body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Arial;background:var(--bg);color:var(--ink)}
  .wrap{width:min(var(--wrap),calc(100% - 32px));margin:0 auto}

  /* HEADER — на обложке */
  .header{position:fixed;top:0;left:0;right:0;z-index:80;background:transparent;border-bottom:0}
  .bar{display:flex;align-items:center;gap:18px;padding:16px 0}
  .brand{display:flex;align-items:center;gap:12px;text-decoration:none}
  .brand img{
    width:140px;height:140px;border-radius:16px;object-fit:contain;
    opacity:1;mix-blend-mode:normal;background:transparent; /* прозрачное лого */
  }
  .brand span{display:none}
  .nav{display:flex;gap:10px;margin-left:auto}
  .nav a{
    position:relative;padding:12px 16px 14px;border-radius:12px;text-decoration:none;
    font-weight:900;letter-spacing:.02em;font-size:clamp(18px,2.2vw,28px);color:var(--soft-blue)
  }
  .nav a:hover{background:rgba(255,255,255,.12)}
  .nav a.active::after{content:'';position:absolute;left:16px;right:16px;bottom:6px;height:2px;background:var(--accent);border-radius:2px}

  /* Кнопки — спокойные */
  .btn{display:inline-block;border:0;border-radius:14px;padding:14px 18px;font-weight:900;text-decoration:none;text-align:center;cursor:pointer;transition:filter .2s}
  .btn-primary{background:var(--accent);color:#062644}
  .btn-primary:hover{filter:brightness(.95)}
  .btn-ghost{border:1.5px solid var(--accent);color:var(--accent);background:transparent}
  .btn-ghost:hover{background:rgba(105,185,255,.14)}
  .btn-lg{padding:16px 22px;font-size:1.05rem;border-radius:16px}

  /* HERO — обложка под шапкой, без правого блока и без бейджа Halden */
  .hero{
    position:relative;min-height:72vh;
    background:
      linear-gradient(180deg, rgba(11,25,54,.58), rgba(11,25,54,.62)),
      url('assets/cover.jpg') center/cover no-repeat;
  }
  .hero::after{content:'';position:absolute;left:0;right:0;bottom:-1px;height:60px;background:linear-gradient(180deg,rgba(11,25,54,0),rgba(11,25,54,.35) 55%,rgba(11,25,54,.6))}
  .hero .inner{display:grid;grid-template-columns:1fr;gap:22px;align-items:end;padding:calc(160px + 2vh) 0 84px}
  .hero h1{margin:12px 0 10px;font-size:clamp(32px,5vw,56px);line-height:1.06}
  .hero p{margin:0 0 18px;color:#d9ebff;max-width:720px}
  .cta-row{display:flex;gap:14px;flex-wrap:wrap}

  /* Секции */
  section{background:transparent}
  .section{padding:56px 0;border-top:1px solid rgba(255,255,255,.06)}
  h2{margin:0 0 12px;font-size:clamp(22px,3.2vw,34px)}
  .lead{color:#c4d6ee;max-width:860px}

  .grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
  .card{background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.04));border:1px solid rgba(255,255,255,.10);border-radius:16px;padding:16px}
  .card h3{margin:0 0 6px;font-size:1.1rem}
  .muted{color:#a9bed8}

  .gallery{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}
  .gallery img{width:100%;height:200px;object-fit:cover;border-radius:14px;border:1px solid rgba(255,255,255,.1)}

  .contact{display:grid;grid-template-columns:1.2fr 1fr;gap:16px;align-items:start}
  .map iframe{width:100%;height:280px;border:0;border-radius:16px;border:1px solid rgba(255,255,255,.1)}

  .footer{border-top:1px solid rgba(255,255,255,.06);background:linear-gradient(180deg,transparent,#061430 30%)}
  .footer .wrap{padding:18px 0;display:flex;justify-content:space-between;align-items:center;color:#cfe3fb}

  /* Плавающая кнопка */
  .floating{position:fixed;right:16px;bottom:16px;z-index:90;background:var(--accent);color:#062644;border-radius:18px;padding:16px 22px;font-weight:900;text-decoration:none;border:0}
  .floating:hover{filter:brightness(.95)}

  /* Анимация появления */
  .reveal{opacity:0;transform:translateY(14px);transition:opacity .6s ease, transform .6s ease}
  .reveal.in{opacity:1;transform:none}
  .delay-1{transition-delay:.1s}.delay-2{transition-delay:.2s}.delay-3{transition-delay:.3s}

  @media (max-width:980px){
    .grid-3{grid-template-columns:1fr 1fr}
    .gallery{grid-template-columns:1fr 1fr}
    .contact{grid-template-columns:1fr}
    .brand img{width:110px;height:110px}
    .hero .inner{padding:calc(130px + 2vh) 0 64px}
  }
  @media (max-width:520px){
    .nav{display:none}
    .grid-3,.gallery{grid-template-columns:1fr}
    .btn-lg{width:100%}
    .brand img{width:96px;height:96px}
  }
</style>
</head>
<body>

<!-- HEADER -->
<header class="header" id="top">
  <div class="wrap bar">
    <a href="#top" class="brand" id="brandLink">
      <img src="assets/logo.png" alt="Pro Carwash Halden">
      <span>Pro Carwash Halden</span>
    </a>
    <nav class="nav" id="nav">
      <a href="#about">Om oss</a>
      <a href="#services">Tjenester</a>
      <a href="#pricing">Priser</a>
      <a href="#gallery">Galleri</a>
      <a href="#contact">Kontakt</a>
    </nav>
  </div>
</header>

<!-- HERO -->
<section id="hero" class="hero">
  <div class="wrap inner">
    <div class="reveal">
      <!-- Бейдж Halden убран -->
      <h1>Bilpleie med showrom-finish</h1>
      <p>Rask og nøye bilvask, interiør, polering og premium detailing.</p>
      <div class="cta-row">
        <a class="btn btn-primary btn-lg" href="#contact">Bestill time</a>
        <!-- Кнопка Se priser убрана -->
      </div>
    </div>
  </div>
</section>

<!-- WHY US -->
<section id="about" class="section">
  <div class="wrap">
    <h2 class="reveal">Hvorfor oss</h2>
    <p class="lead class reveal delay-1">Moderne utstyr + erfaring = ren og blank bil som varer lenger.</p>
    <div class="grid-3">
      <div class="card reveal delay-1"><h3>Skånsom håndvask</h3><p class="muted">Riktig kjemi og teknikk</p></div>
      <div class="card reveal delay-2"><h3>Erfarne teknikere</h3><p class="muted">Nøyaktig finish</p></div>
      <div class="card reveal delay-3"><h3>Rask service</h3><p class="muted">Tydelige tider</p></div>
    </div>
  </div>
</section>

<!-- SERVICES -->
<section id="services" class="section">
  <div class="wrap">
    <h2 class="reveal">Tjenester</h2>
    <p class="lead reveal delay-1">Alt innen bilpleie og dekk — ryddig gruppert for enkel navigasjon.</p>

    <style>
      /* локальные стили этой секции */
      .svc-group{margin-top:18px}
      .svc-title{margin:0 0 8px; font-size:1.2rem; color:#e8f1ff}
      .svc-sub{margin:0 0 14px; color:#a9bed8}
      .svc-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
      .svc-card{
        position:relative;
        background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.04));
        border:1px solid rgba(255,255,255,.10);
        border-radius:16px; padding:16px; overflow:hidden;
      }
      .svc-card h3{margin:0 0 8px;font-size:1.05rem;color:#e8f1ff}
      .svc-card ul{margin:0;padding-left:18px;color:#a9bed8;line-height:1.5}
      @media (max-width:980px){.svc-grid{grid-template-columns:1fr 1fr}}
      @media (max-width:520px){.svc-grid{grid-template-columns:1fr}}
      /* опционально: фоновые изображения — см. подсказки ниже */
      .svc-card.has-bg::before{
        content:""; position:absolute; inset:0;
        background-size:cover; background-position:center;
        filter:brightness(.45); opacity:.35; /* делает текст читаемым */
      }
      .svc-card .content{position:relative}
    </style>

    <!-- 1) Bilpleie / Vask & Detailing -->
    <div class="svc-group">
      <h3 class="svc-title reveal">Bilpleie · Vask & Detailing</h3>
      <p class="svc-sub reveal delay-1">Utvendig/innvendig vask, lakkrens, polering og rens.</p>

      <div class="svc-grid">
        <div class="svc-card reveal delay-1">
          <div class="content">
            <h3>UTVENDIG VASK</h3>
            <ul>
              <li>Avfetting</li><li>Asfaltfjerning</li><li>Håndvask</li><li>Felgvask</li><li>Tørking</li>
            </ul>
          </div>
        </div>

        <div class="svc-card reveal delay-2">
          <div class="content">
            <h3>INNVENDIG VASK</h3>
            <ul>
              <li>Støvsuging</li><li>Interiørvask</li><li>Vindusvask</li><li>Mattevask</li><li>Tørking</li>
            </ul>
          </div>
        </div>

        <div class="svc-card reveal delay-3">
          <div class="content">
            <h3>LAKKRENS</h3>
            <ul>
              <li>Avfetting</li><li>Asfaltfjerning</li><li>Håndvask</li><li>Felgvask</li>
              <li>Tørking</li><li>Fjerning av lette striper</li><li>Polering</li><li>Lakkrens</li>
            </ul>
          </div>
        </div>

        <div class="svc-card reveal delay-1">
          <div class="content">
            <h3>POLERING</h3>
            <ul>
              <li>Avfetting</li><li>Asfaltfjerning</li><li>Håndvask</li><li>Felgvask</li>
              <li>Tørking</li><li>Polering</li>
            </ul>
          </div>
        </div>

        <div class="svc-card reveal delay-2">
          <div class="content">
            <h3>INNVENDIG RENS</h3>
            <ul>
              <li>Støvsuging</li><li>Interiørvask</li><li>Vindusvask</li><li>Mattevask</li>
              <li>Tørking</li><li>Rens av seter</li><li>Lukt sanering</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- 2) Dekk & Felg (шиномонтаж) -->
    <div class="svc-group">
      <h3 class="svc-title reveal" style="color:#bfe6ff">Dekk & Felg</h3>
      <p class="svc-sub reveal delay-1">Skift, hotell og salg av dekk og felg.</p>

      <div class="svc-grid">
        <div class="svc-card reveal delay-1">
          <div class="content">
            <h3>DEKKSKIFT</h3>
            <ul><li>Av- og påmontering</li></ul>
          </div>
        </div>

        <div class="svc-card reveal delay-2">
          <div class="content">
            <h3>DEKKHOTELL</h3>
            <ul><li>Avmontering</li><li>Vask</li><li>Oppbevaring</li><li>Påmontering</li></ul>
          </div>
        </div>

        <div class="svc-card reveal delay-3">
          <div class="content">
            <h3>SALG AV DEKK OG FELG</h3>
            <ul>
              <li>Nye dekk og felger</li>
              <li>Bestilling etter mål og sesong</li>
              <li>Montering og balansering</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div class="cta-row" style="margin-top:16px">
      <a class="btn btn-primary btn-lg" href="#contact">Bestill time</a>
    </div>
  </div>
</section>

  <div class="wrap">
    <h2 class="reveal">Tjenester</h2>

    <style>
      /* локальные стили для списков услуг */
      .svc-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-top:12px}
      .svc-card{background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.04));border:1px solid rgba(255,255,255,.10);border-radius:16px;padding:16px}
      .svc-card h3{margin:0 0 8px;font-size:1.05rem;color:#e8f1ff}
      .svc-card ul{margin:0;padding-left:18px;color:#a9bed8;line-height:1.5}
      @media (max-width:980px){.svc-grid{grid-template-columns:1fr 1fr}}
      @media (max-width:520px){.svc-grid{grid-template-columns:1fr}}
    </style>

    <div class="svc-grid">
      <div class="svc-card reveal delay-1">
        <h3>UTVENDIG VASK</h3>
        <ul>
          <li>Avfetting</li>
          <li>Asfaltfjerning</li>
          <li>Håndvask</li>
          <li>Felgvask</li>
          <li>Tørking</li>
        </ul>
      </div>

      <div class="svc-card reveal delay-2">
        <h3>INNVENDIG VASK</h3>
        <ul>
          <li>Støvsuging</li>
          <li>Interiørvask</li>
          <li>Vindusvask</li>
          <li>Mattevask</li>
          <li>Tørking</li>
        </ul>
      </div>

      <div class="svc-card reveal delay-3">
        <h3>LAKKRENS</h3>
        <ul>
          <li>Avfetting</li>
          <li>Asfaltfjerning</li>
          <li>Håndvask</li>
          <li>Felgvask</li>
          <li>Tørking</li>
          <li>Fjerning av lette striper</li>
          <li>Polering</li>
          <li>Lakkrens</li>
        </ul>
      </div>

      <div class="svc-card reveal delay-1">
        <h3>DEKKSKIFT</h3>
        <ul>
          <li>Av- og påmontering</li>
        </ul>
      </div>

      <div class="svc-card reveal delay-2">
        <h3>DEKKHOTELL</h3>
        <ul>
          <li>Avmontering</li>
          <li>Vask</li>
          <li>Oppbevaring</li>
          <li>Påmontering</li>
        </ul>
      </div>

      <div class="svc-card reveal delay-3">
        <h3>POLERING</h3>
        <ul>
          <li>Avfetting</li>
          <li>Asfaltfjerning</li>
          <li>Håndvask</li>
          <li>Felgvask</li>
          <li>Tørking</li>
          <li>Polering</li>
        </ul>
      </div>

      <div class="svc-card reveal delay-1">
        <h3>INNVENDIG RENS</h3>
        <ul>
          <li>Støvsuging</li>
          <li>Interiørvask</li>
          <li>Vindusvask</li>
          <li>Mattevask</li>
          <li>Tørking</li>
          <li>Rens av seter</li>
          <li>Lukt sanering</li>
        </ul>
      </div>

      <div class="svc-card reveal delay-2">
        <h3>SALG AV DEKK OG FELG</h3>
        <ul>
          <li>Nye dekk og felger</li>
          <li>Bestilling etter mål og sesong</li>
          <li>Montering og balansering</li>
        </ul>
      </div>
    </div>

    <div class="cta-row" style="margin-top:16px">
      <a class="btn btn-primary btn-lg" href="#contact">Bestill time</a>
    </div>
  </div>
</section>


<!-- PRICING -->
<section id="pricing" class="section">
  <div class="wrap">
    <h2 class="reveal">Priser</h2>
    <p class="lead reveal delay-1">Velg pakken — bestill på nett, enkelt og raskt.</p>
    <div class="grid-3">
      <div class="card reveal delay-1">
        <h3>Rask utvendig vask</h3>
        <p><b>199 NOK</b></p>
        <p class="muted">Håndvask, felgrens og tørk</p>
        <a class="btn btn-primary" href="#contact">Bestill</a>
      </div>
      <div class="card reveal delay-2" style="border:1px solid rgba(105,185,255,.35)">
        <h3>Komplett vask</h3>
        <p><b>399 NOK</b></p>
        <p class="muted">Utvendig + enkel innvendig</p>
        <a class="btn btn-primary" href="#contact">Bestill</a>
      </div>
      <div class="card reveal delay-3">
        <h3>Premium detailing</h3>
        <p><b>1490 NOK</b></p>
        <p class="muted">Kjemi, beskyttelse og finish</p>
        <a class="btn btn-primary" href="#contact">Bestill</a>
      </div>
    </div>
  </div>
</section>

<!-- GALLERY -->
<section id="gallery" class="section">
  <div class="wrap">
    <h2 class="reveal">Galleri</h2>
    <p class="lead reveal delay-1">Alle bilder fra én mappe — sortert etter filnavn. Klikk for stort bilde.</p>

    <style>
      /* сетка + "Загрузить ещё" + лайтбокс */
      .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-top:12px}
      .tile{position:relative;border-radius:14px;overflow:hidden;border:1px solid rgba(255,255,255,.1);background:#0b1936}
      .tile img{width:100%;height:200px;object-fit:cover;display:block;opacity:0;transition:opacity .3s ease}
      .tile img.loaded{opacity:1}
      .more{display:flex;justify-content:center;margin-top:12px}
      .more button{background:var(--accent);color:#062644;border:0;border-radius:14px;padding:12px 16px;font-weight:900;cursor:pointer}
      .more button:hover{filter:brightness(.95)}
      @media (max-width:980px){.grid{grid-template-columns:repeat(2,1fr)}}
      @media (max-width:520px){.grid{grid-template-columns:1fr}}
      /* лайтбокс */
      .lb{position:fixed;inset:0;background:rgba(0,0,0,.72);display:none;place-items:center;z-index:120}
      .lb.open{display:grid;animation:fadeIn .2s ease}
      @keyframes fadeIn{from{opacity:0}to{opacity:1}}
      .lb-frame{position:relative;width:min(96vw,1100px);height:min(86vh,720px);background:#0b1936;border:1px solid rgba(255,255,255,.12);border-radius:16px;overflow:hidden}
      .lb-track{display:flex;width:100%;height:100%;transition:transform .35s ease}
      .lb-slide{flex:0 0 100%;display:grid;place-items:center;background:#0b1936}
      .lb-slide img{max-width:100%;max-height:100%;object-fit:contain}
      .lb-x,.lb-prev,.lb-next{position:absolute;background:rgba(255,255,255,.22);border:0;border-radius:12px;color:#fff;font-weight:900;cursor:pointer;padding:10px 12px}
      .lb-x{top:10px;right:10px}
      .lb-prev{left:10px;top:50%;transform:translateY(-50%)}
      .lb-next{right:10px;top:50%;transform:translateY(-50%)}
      .lb-x:hover,.lb-prev:hover,.lb-next:hover{filter:brightness(1.1)}
    </style>

    <div id="galGrid" class="grid"></div>
    <div class="more"><button id="galMore" type="button">Last inn flere</button></div>

    <!-- lightbox -->
    <div id="galLb" class="lb" aria-hidden="true">
      <div class="lb-frame" role="dialog" aria-modal="true">
        <button class="lb-x" id="lbX" aria-label="Lukk">×</button>
        <div class="lb-track" id="lbTrack"></div>
        <button class="lb-prev" id="lbPrev" aria-label="Forrige">‹</button>
        <button class="lb-next" id="lbNext" aria-label="Neste">›</button>
      </div>
    </div>

    <script>
      // НАСТРОЙКИ
      const MANIFEST_URL = "assets/gallery.json"; // список файлов
      const BATCH = 24; // сколько показывать за одну порцию

      const grid = document.getElementById('galGrid');
      const btnMore = document.getElementById('galMore');
      const lb = document.getElementById('galLb');
      const lbTrack = document.getElementById('lbTrack');
      const lbX = document.getElementById('lbX');
      const lbPrev = document.getElementById('lbPrev');
      const lbNext = document.getElementById('lbNext');

      let IMAGES = [];      // список путей из JSON
      let shown = 0;        // сколько выведено
      let current = 0;      // индекс в лайтбоксе

      // ленивое отображение
      function imgEl(src, i){
        const wrap = document.createElement('article');
        wrap.className = 'tile';
        wrap.dataset.i = i;
        const img = document.createElement('img');
        img.loading = 'lazy';
        img.alt = 'Foto ' + (i+1);
        // отложенная подстановка src + плавное появление
        const obs = new IntersectionObserver((ents)=>{
          ents.forEach(e=>{
            if(e.isIntersecting){
              img.src = src;
              img.onload = ()=> img.classList.add('loaded');
              obs.unobserve(wrap);
            }
          })
        },{threshold: 0.1});
        obs.observe(wrap);
        wrap.appendChild(img);
        wrap.addEventListener('click', ()=>openLb(i));
        return wrap;
      }

      async function loadManifest(){
        const res = await fetch(MANIFEST_URL);
        IMAGES = await res.json(); // массив строк: ["assets/foto/001.jpg", ...]
        // уже отсортировано в файле; если надо — можно перепроверить:
        // IMAGES.sort((a,b)=>a.localeCompare(b,'en',{numeric:true}));
        renderMore();
      }

      function renderMore(){
        const next = Math.min(shown + BATCH, IMAGES.length);
        for(let i=shown;i<next;i++){
          grid.appendChild(imgEl(IMAGES[i], i));
        }
        shown = next;
        if(shown >= IMAGES.length) btnMore.style.display = 'none';
      }

      // Лайтбокс
      function openLb(i){
        current = i;
        lbTrack.innerHTML = IMAGES.map(src=>`<div class="lb-slide"><img src="${src}" alt=""></div>`).join('');
        lb.classList.add('open');
        updateLb();
      }
      function closeLb(){ lb.classList.remove('open'); }
      function updateLb(){
        const w = lbTrack.clientWidth;
        lbTrack.style.transform = `translateX(-${current * w}px)`;
      }
      function prev(){ current = (current - 1 + IMAGES.length) % IMAGES.length; updateLb(); }
      function next(){ current = (current + 1) % IMAGES.length; updateLb(); }

      // события
      btnMore.addEventListener('click', renderMore);
      lbX.addEventListener('click', closeLb);
      lb.addEventListener('click', e=>{ if(e.target===lb) closeLb(); });
      lbPrev.addEventListener('click', prev);
      lbNext.addEventListener('click', next);
      window.addEventListener('resize', ()=>{ if(lb.classList.contains('open')) updateLb(); });
      document.addEventListener('keydown', e=>{
        if(!lb.classList.contains('open')) return;
        if(e.key==='Escape') closeLb();
        if(e.key==='ArrowLeft') prev();
        if(e.key==='ArrowRight') next();
      });

      loadManifest();
    </script>
  </div>
</section>


<!-- CONTACT -->
<section id="contact" class="section">
  <div class="wrap contact">
    <div class="reveal">
      <h2>Kontakt</h2>
      <p><b>Adresse:</b> Sykehusgata 8, 1767 Halden, Norge</p>
      <p>
        <a class="btn btn-ghost" target="_blank" rel="noopener"
           href="https://maps.apple.com/place?address=Sykehusgata%208,%201767%20Halden,%20Norway&coordinate=59.123026,11.394009&name=Pro%20Carwash%20Halden%20%7C%20Halden&place-id=IA625F661BBED5090&map=explore">
           Åpne i Apple Maps
        </a>
      </p>
      <h3>Åpningstider</h3>
      <ul class="muted">
        <li>Mandag: 08:30 – 16:30</li>
        <li>Tirsdag: 08:30 – 16:30</li>
        <li>Onsdag: 08:30 – 16:30</li>
        <li>Torsdag: 08:30 – 16:30</li>
        <li>Fredag: 08:30 – 16:30</li>
        <li>Lørdag: 10:00 – 15:00</li>
        <li>Søndag: Stengt</li>
      </ul>
      <p><b>Telefon:</b> <a href="tel:+4792132214" style="color:#d9ebff">+47 92 13 22 14</a></p>
      <p><b>E-post:</b> <a href="mailto:post@procarwash.no" style="color:#d9ebff">post@procarwash.no</a></p>
      <div class="cta-row" style="margin-top:10px">
        <a class="btn btn-primary btn-lg" href="#contact">Bestill time</a>
      </div>
    </div>
    <div class="map reveal delay-2">
      <iframe title="Kart" loading="lazy" referrerpolicy="no-referrer-when-downgrade"
        src="https://maps.google.com/maps?q=Sykehusgata%208,%201767%20Halden&t=&z=13&ie=UTF8&iwloc=&output=embed"></iframe>
    </div>
  </div>
</section>

<!-- FOOTER -->
<footer class="footer">
  <div class="wrap">
    <small>© <span id="year"></span> Pro Carwash Halden</small>
    <a class="btn btn-ghost" href="#top">Til toppen ↑</a>
  </div>
</footer>

<!-- Плавающая кнопка -->
<a class="floating" href="#contact" aria-label="Bestill time">Bestill time</a>

<script>
  document.getElementById('year').textContent = new Date().getFullYear();

  const header = document.querySelector('.header');

  // Клик по логотипу — плавно в самый верх
  document.getElementById('brandLink').addEventListener('click', (e)=>{
    e.preventDefault();
    window.scrollTo({top:0, behavior:'smooth'});
  });

  // Плавный скролл по якорям с учётом шапки
  function smartScrollTo(hash){
    const el = document.querySelector(hash);
    if(!el) return;
    const y = el.getBoundingClientRect().top + window.pageYOffset - (header.offsetHeight+8);
    window.scrollTo({top:y, behavior:'smooth'});
  }
  document.querySelectorAll('a[href^="#"]').forEach(a=>{
    a.addEventListener('click', e=>{
      const hash=a.getAttribute('href');
      if(hash.length>1 && a.id!=='brandLink'){ e.preventDefault(); smartScrollTo(hash); }
    });
  });

  // Подсветка активного раздела (по наибольшей видимой части)
  const navLinks=[...document.querySelectorAll('.nav a')];
  const sections=navLinks.map(a=>document.querySelector(a.getAttribute('href'))).filter(Boolean);
  const io = new IntersectionObserver((entries)=>{
    let best={id:null,ratio:0};
    entries.forEach(en=>{ if(en.intersectionRatio>best.ratio) best={id:en.target.id,ratio:en.intersectionRatio}; });
    if(best.id){ navLinks.forEach(a=>a.classList.toggle('active', a.getAttribute('href')==='#'+best.id)); }
  },{
    threshold:[0,.25,.5,.75,1],
    rootMargin:`-${header.offsetHeight+6}px 0px -40% 0px`
  });
  sections.forEach(s=>io.observe(s));

  // Анимация появления
  const io2 = new IntersectionObserver((ents)=>{
    ents.forEach(e=>{ if(e.isIntersecting){ e.target.classList.add('in'); io2.unobserve(e.target);} });
  },{threshold:0.12});
  document.querySelectorAll('.reveal').forEach(el=>io2.observe(el));
</script>
</body>
</html>
